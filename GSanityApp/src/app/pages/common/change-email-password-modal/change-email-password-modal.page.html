<ion-content>
	<form
		[formGroup]="emailForm"
		(ngSubmit)="submitEmailForm()"
		novalidate
		*ngIf="mode == 'email'"
	>
		<ion-text
			><h5 class="title">
				Para cambiar el email primero debes indicar el mail anterior y
				posteriormente el actual
			</h5></ion-text
		>
		<ion-grid>
			<ion-row>
				<ion-col>
					<ion-item>
						<ion-icon name="mail-outline"></ion-icon>
						<ion-label position="floating">current Email</ion-label>
						<ion-input
							required
							formControlName="email"
							type="email"
						></ion-input>
					</ion-item>
					<div class="error">
						<ng-container
							*ngFor="let validation of validationMessages.email"
						>
							<div
								*ngIf="emailForm.get('email').hasError(validation.type) && (emailForm.get('email').dirty || emailForm.get('email').touched || isSubmitted)"
							>
								{{ validation.message | translate }}
							</div>
						</ng-container>
					</div>
				</ion-col>
			</ion-row>
			<ion-row>
				<ion-col>
					<ion-item>
						<ion-icon name="lock-closed-outline"></ion-icon>
						<ion-label position="floating">current Password</ion-label>
						<ion-input
							required
							formControlName="password"
							type="password"
						></ion-input>
					</ion-item>
					<div class="error">
						<ng-container
							*ngFor="let validation of validationMessages.password"
						>
							<div
								*ngIf="emailForm.get('password').hasError(validation.type) && (emailForm.get('password').dirty || emailForm.get('password').touched || isSubmitted)"
							>
								{{ validation.message | translate }}
							</div>
						</ng-container>
					</div>
				</ion-col>
			</ion-row>
			<ion-row>
				<ion-col>
					<ion-item>
						<ion-icon name="mail-outline"></ion-icon>
						<ion-label position="floating">new Email</ion-label>
						<ion-input
							required
							formControlName="newEmail"
							type="email"
						></ion-input>
					</ion-item>
					<div class="error">
						<ng-container
							*ngFor="let validation of validationMessages.newEmail"
						>
							<div
								*ngIf="emailForm.get('newEmail').hasError(validation.type) && (emailForm.get('newEmail').dirty || emailForm.get('newEmail').touched || isSubmitted)"
							>
								{{ validation.message | translate }}
							</div>
						</ng-container>
					</div>
				</ion-col>
			</ion-row>
			<ion-row>
				<ion-col>
					<ion-item>
						<ion-icon name="mail-outline"></ion-icon>
						<ion-label position="floating">Confirm New Email</ion-label>
						<ion-input
							required
							formControlName="confirmNewEmail"
							type="email"
						></ion-input>
					</ion-item>
					<div class="error">
						<ng-container
							*ngFor="let validation of validationMessages.confirmNewEmail"
						>
							<div
								*ngIf="emailForm.get('confirmNewEmail').hasError(validation.type) && (emailForm.get('confirmNewEmail').dirty || emailForm.get('confirmNewEmail').touched || isSubmitted)"
							>
								{{ validation.message | translate }}
							</div>
						</ng-container>
						<div
							class="error-message"
							*ngIf="!emailForm.get('newEmail').errors && emailForm.hasError('newEmailNotMatch') && (emailForm.get('newEmail').dirty || emailForm.get('newEmail').touched)"
						>
							{{'errors.newEmailAndConfirmEmailNotMatch' | translate }}
						</div>
					</div>
				</ion-col>
			</ion-row>
			<ion-button type="submit" expand="block" fill="solid" class="sign-btn"
				>Confirm</ion-button
			>
			<ion-button
				fill="outline"
				expand="block"
				(click)="dimiss()"
				class="sign-btn"
				>Dimiss</ion-button
			>
		</ion-grid>
	</form>
	<form
		[formGroup]="passwordForm"
		(ngSubmit)="submitPasswordForm()"
		novalidate
		*ngIf="mode == 'password'"
	>
		<ion-text><h5 class="title">Cambiar la contrase√±a</h5></ion-text>
		<ion-grid>
			<ion-row>
				<ion-col>
					<ion-item>
						<ion-icon name="mail-outline"></ion-icon>
						<ion-label position="floating">current Email</ion-label>
						<ion-input
							required
							formControlName="email"
							type="email"
						></ion-input>
					</ion-item>
					<div class="error">
						<ng-container
							*ngFor="let validation of validationMessages.email"
						>
							<div
								*ngIf="passwordForm.get('email').hasError(validation.type) && (passwordForm.get('email').dirty || passwordForm.get('email').touched || isSubmitted)"
							>
								{{ validation.message | translate }}
							</div>
						</ng-container>
					</div>
				</ion-col>
			</ion-row>
			<ion-row>
				<ion-col>
					<ion-item>
						<ion-icon name="lock-closed-outline"></ion-icon>
						<ion-label position="floating">current Password</ion-label>
						<ion-input
							required
							formControlName="currentPassword"
							type="password"
						></ion-input>
					</ion-item>
					<div class="error">
						<ng-container
							*ngFor="let validation of validationMessages.currentPassword"
						>
							<div
								*ngIf="passwordForm.get('currentPassword').hasError(validation.type) && (passwordForm.get('currentPassword').dirty || passwordForm.get('currentPassword').touched || isSubmitted)"
							>
								{{ validation.message | translate }}
							</div>
						</ng-container>
					</div>
				</ion-col>
			</ion-row>
			<ion-row>
				<ion-col>
					<ion-item>
						<ion-icon name="lock-closed-outline"></ion-icon>
						<ion-label position="floating">Password</ion-label>
						<ion-input
							formControlName="password"
							type="password"
							mode="ios"
						></ion-input>
					</ion-item>
					<div class="error">
						<ng-container
							*ngFor="let validation of validationMessages.password"
						>
							<div
								*ngIf="passwordForm.get('password').hasError(validation.type) && (passwordForm.get('password').dirty || passwordForm.get('password').touched || isSubmitted)"
							>
								{{ validation.message | translate }}
							</div>
						</ng-container>
					</div>
				</ion-col>
			</ion-row>
			<ion-row>
				<ion-col>
					<ion-item>
						<ion-icon name="lock-closed-outline"></ion-icon>
						<ion-label position="floating">Confirm Password</ion-label>
						<ion-input
							formControlName="confirmPassword"
							type="password"
							mode="ios"
						></ion-input>
					</ion-item>
					<div class="error">
						<ng-container
							*ngFor="let validation of validationMessages.confirmPassword"
						>
							<div
								*ngIf="passwordForm.get('confirmPassword').hasError(validation.type) && (passwordForm.get('confirmPassword').dirty || passwordForm.get('confirmPassword').touched || isSubmitted)"
							>
								{{ validation.message | translate}}
							</div>
						</ng-container>
						<div
							class="error-message"
							*ngIf="!passwordForm.get('confirmPassword').errors && passwordForm.hasError('passwordNotMatch') && (passwordForm.get('confirmPassword').dirty || passwordForm.get('confirmPassword').touched)"
						>
							{{'errors.newPasswordNotMatch' | translate}}
						</div>
					</div>
				</ion-col>
			</ion-row>
			<ion-button type="submit" expand="block" fill="solid" class="sign-btn"
				>Confirm</ion-button
			>
			<ion-button
				expand="block"
				fill="outline"
				class="sign-btn"
				(click)="dimiss()"
				>Dimiss</ion-button
			>
		</ion-grid>
	</form>
</ion-content>
